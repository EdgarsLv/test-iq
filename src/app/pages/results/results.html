<div class="section">
  <div class="card flex justify-between items-center">
    <div>
      <h4>Your IQ Test results</h4>
      <p class="text-muted-color">Edgars (43)</p>
    </div>
    <div>
      <p-avatar label="EP" size="xlarge" />
    </div>
  </div>

  <div class="grid lg:grid-cols-6 gap-4 sm:grid-cols-3">
    <app-stats-widget
      text="Current score"
      [score]="stats().currentScore"
      icon="pi pi-lightbulb"
    />
    <app-stats-widget
      text="Highest score"
      [score]="stats().highest"
      icon="pi pi-trophy"
    />
    <app-stats-widget
      text="Average score"
      [score]="stats().average"
      icon="pi pi-chart-bar"
    />
    <app-stats-widget
      text="Improvement"
      [score]="stats().improvement"
      icon="pi pi-chart-line"
    />
    <app-stats-widget
      text="Tests taken"
      [score]="stats().totalTests"
      icon="pi pi-calendar-times"
    />
    <app-stats-widget
      text="Average time"
      [score]="stats().averageTime"
      icon="pi pi-stopwatch"
    />
  </div>

  <div class="card mt-7">
    <h4>Score Timeline</h4>

    <p-table
      [value]="testResults()"
      [paginator]="true"
      [rows]="5"
      [alwaysShowPaginator]="false"
    >
      <ng-template #header>
        <tr>
          <th>#</th>
          <th>Date</th>
          <th>Score</th>
          <th>Time</th>
          <th>Performance</th>
        </tr>
      </ng-template>
      <ng-template #body let-item>
        <tr>
          <td>{{ item.order }}</td>
          <td>{{ item.date | date : "dd.MM.yyyy" }}</td>
          <td>
            <p-tag
              [value]="item.iqScore"
              [severity]="getScoreColor(item.iqScore)"
            />
          </td>
          <td>{{ timeInMinutes(item) }}m</td>
          <td>
            <p-progressbar
              [value]="progressWidth(item)"
              [valueStyleClass]="getScoreGradient(item.iqScore)"
              [showValue]="false"
              [style]="{ height: '0.6rem' }"
            />
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>

  <div class="analysis">
    <div class="interpretation">
      <h2>Score interpretation</h2>
      <div class="score">
        <span>130+ (Exceptional)</span>
        <span [style.color]="'purple'">2%</span>
      </div>
      <div class="score">
        <span>115-129 (Above Average)</span>
        <span [style.color]="'blue'">16%</span>
      </div>
      <div class="score">
        <span>100-114 (Average)</span>
        <span [style.color]="'green'">50%</span>
      </div>
      <div class="score">
        <span>85-99 (Below Average)</span>
        <span [style.color]="'yellow'">16%</span>
      </div>
      <div class="score">
        <span>Below 85 (Low)</span>
        <span [style.color]="'red'">16%</span>
      </div>
    </div>

    <div class="statistics">
      <h2>Your Statistics</h2>

      <div class="stats">
        <span>Current Level:</span>
        <span [style.color]="getScoreColor(stats()!.average)">
          {{ curretLevel() }}
        </span>
      </div>
      <div class="stats">
        <span>Score Range:</span>
        <span>{{ stats().lowest }} - {{ stats().highest }}</span>
      </div>
      <div class="stats">
        <span>Consistency:</span>
        <span> {{ consistency() }} </span>
      </div>
    </div>
  </div>
</div>
