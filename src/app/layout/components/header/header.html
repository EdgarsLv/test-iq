<div class="layout-topbar">
  <div class="layout-topbar-logo-container">
    <a class="layout-topbar-logo" routerLink="/">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="28"
        height="28"
        viewBox="0 0 24 24"
      >
        <g
          fill="none"
          stroke="var(--primary-color)"
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
        >
          <path
            d="M12 18V5m3 8a4.17 4.17 0 0 1-3-4a4.17 4.17 0 0 1-3 4m8.598-6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5"
          />
          <path d="M17.997 5.125a4 4 0 0 1 2.526 5.77" />
          <path d="M18 18a4 4 0 0 0 2-7.464" />
          <path d="M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517" />
          <path d="M6 18a4 4 0 0 1-2-7.464" />
          <path d="M6.003 5.125a4 4 0 0 0-2.526 5.77" />
        </g>
      </svg>

      <span class="font-semibold">IQ TEST</span>
    </a>
  </div>

  <div class="flex items-center ml-auto gap-x-2">
    <div class="flex font-semibold items-center">
      @if (!authService.authUser()) {
      <a
        pButton
        size="small"
        severity="success"
        [outlined]="true"
        icon="pi pi-sign-in"
        routerLink="login"
        >Sign In</a
      >
      }
    </div>

    <p-button
      (click)="toggleDarkMode()"
      [outlined]="true"
      severity="secondary"
      size="small"
      icon="pi pi-moon"
    />
    <p-popover #op>
      <div class="flex flex-col w-[12rem]">
        <a
          pRipple
          routerLink="/"
          class="flex items-center p-3 hover:bg-emphasis cursor-pointer"
          (click)="close()"
        >
          <span class="pi pi-home"></span>
          <span class="ml-3">Home</span>
        </a>
        <div class="border-b border-slate-500 my-2"></div>

        <a
          pRipple
          class="flex items-center p-3 hover:bg-emphasis cursor-pointer"
          routerLink="profile"
          (click)="close()"
        >
          <span class="pi pi-user-edit"></span>
          <span class="ml-3">Profile</span>
          @if (authService.authUser()) {
          <span class="ml-auto text-muted-color">
            <i class="pi pi-lock"></i>
          </span>
          }
        </a>

        <!-- NAVIGATION -->
        @for (item of items; track $index) {
        <a
          pRipple
          class="flex items-center p-3 hover:bg-emphasis cursor-pointer"
          [routerLink]="item.link"
          (click)="close()"
        >
          <span [class]="item.icon"></span>
          <span class="ml-3">{{ item.label }}</span>
          @if (authService.authUser()) {
          <span class="ml-auto text-muted-color">
            <i class="pi pi-lock"></i>
          </span>
          }
        </a>
        }

        <!-- ACTIONS -->
        @if (authService.authUser()) {
        <div class="border-t border-slate-500 my-2"></div>
        <a
          pRipple
          class="flex items-center text-red-400 p-3 cursor-pointer"
          (click)="signOut()"
          (click)="close()"
        >
          <span class="pi pi-sign-out"></span>
          <span class="ml-3">Sign Out</span>
        </a>
        }@else {
        <a
          pRipple
          routerLink="login"
          class="flex items-center p-menu-item-link text-green-400 p-3 hover:bg-emphasis cursor-pointer"
          (click)="close()"
        >
          <span class="pi pi-sign-in"></span>
          <span class="ml-2">Sign In</span>
        </a>
        }
      </div>
    </p-popover>

    <p-button
      (onClick)="toggle($event)"
      [outlined]="true"
      severity="contrast"
      icon="pi pi-bars"
    />
  </div>
</div>
